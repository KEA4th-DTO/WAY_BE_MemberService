apiVersion: apps/v1
kind: Deployment
metadata:
  name: way-be-memberservice
spec:
  replicas: 1
  selector:
    matchLabels:
      app: way-be-memberservice
  template:
    metadata:
      labels:
        app: way-be-memberservice
    spec:
      nodeSelector:
        area: private
      containers:
        - name: way-memberservice-container
          image: gcu-dto-dev.kr-central-2.kcr.dev/way-member/way-member:af35d2273640a760a31be6145f3491b87364c88f
          ports:
            - containerPort: 8080
          envFrom:
            - configMapRef:
                name: way-be-memberservice-config
            - secretRef:
                name: way-be-memberservice-secret
        imagePullSecrets:
        - name: way-member-regi-sec

---
apiVersion: apps/v1
kind: Service
apiVersion: v1
metadata:
  name: member-service
  annotations:
    service.beta.kubernetes.io/openstack-internal-load-balancer: 'false'
    loadbalancer.ike.kakaocloud.com/load-balancer-type: 'NLB'
spec:
  selector:
    app: way-be-memberservice
  type: LoadBalancer
  ports:
    - name: http
      port: 50004
      targetPort: 8080

